{% extends "base_generic.html" %}
{% load static %}
{% block content %}
<h1>Employee Table</h1>

<form method="GET" action="{% url 'employee_table' %}">
    <input type="text" name="filter" placeholder="Enter search term">
    <select name="column">
        <option value="first_name">First Name</option>
        <option value="last_name">Last Name</option>
        <option value="position">Position</option>
        <option value="phone">Phone</option>
        <option value="email">Email</option>
    </select>
    <button type="submit">Find</button>
</form>


<!-- Таблица -->
<div class="employee-table-container">
    <table class="employee-table" id="employee-table">
    <thead>
        <tr>
            <th onclick="sortTable(0)">First Name <span id="sort-arrow-0"></span></th>
            <th onclick="sortTable(1)">Last Name <span id="sort-arrow-1"></span></th>
            <th onclick="sortTable(2)">Position <span id="sort-arrow-2"></span></th>
            <th onclick="sortTable(3)">Phone <span id="sort-arrow-3"></span></th>
            <th onclick="sortTable(4)">Email <span id="sort-arrow-4"></span></th>
            <th>Photo</th>
            <th>Select</th>
        </tr>
    </thead>
    <tbody>
        {% for employee in page_obj %}
        <tr onclick="showDetails(this)">
            <td>{{ employee.first_name }}</td>
            <td>{{ employee.last_name }}</td>
            <td>{{ employee.position }}</td>
            <td>{{ employee.phone }}</td>
            <td>{{ employee.email }}</td>
            <td>
                {% if employee.photo %}
                <img src="{{ employee.photo.url }}" alt="{{ employee.first_name }}" width="50">
                {% else %}
                No photo
                {% endif %}
            </td>
            <td><input type="checkbox" name="select_employee" value="{{ employee.id }}"></td>
        </tr>
        {% endfor %}
    </tbody>
    </table>

<div class="pagination">
    <span class="step-links">
        {% if page_obj.has_previous %}
            <a href="?filter={{ request.GET.filter }}&column={{ request.GET.column }}&page=1">&laquo;</a>
            <a href="?filter={{ request.GET.filter }}&column={{ request.GET.column }}&page={{ page_obj.previous_page_number }}">&lt;</a>
        {% else %}
            <span class="disabled">&laquo;</span>
            <span class="disabled">&lt;</span>
        {% endif %}

        {% for i in page_obj.paginator.page_range %}
            {% if page_obj.number == i %}
                <span class="current">{{ i }}</span>
            {% else %}
                <a href="?filter={{ request.GET.filter }}&column={{ request.GET.column }}&page={{ i }}">{{ i }}</a>
            {% endif %}
        {% endfor %}

        {% if page_obj.has_next %}
            <a href="?filter={{ request.GET.filter }}&column={{ request.GET.column }}&page={{ page_obj.next_page_number }}">&gt;</a>
            <a href="?filter={{ request.GET.filter }}&column={{ request.GET.column }}&page={{ page_obj.paginator.num_pages }}">&raquo;</a>
        {% else %}
            <span class="disabled">&gt;</span>
            <span class="disabled">&raquo;</span>
        {% endif %}
    </span>
</div>



</div>

<div id="employee-details" class="details-container">
    <h3>Employee Details</h3>
    <div id="details" class="details-content">
        <p>Select a row to view details.</p>
    </div>
</div>

<!-- Кнопка премирования -->
<button onclick="rewardSelected()">Reward Selected</button>

{% block scripts %}
<script src="{% static 'js/table.js' %}"></script>
{% endblock %}
{% endblock %}
